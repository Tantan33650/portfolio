{"ast":null,"code":"function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar LiquidButton =\n/*#__PURE__*/\nfunction () {\n  function LiquidButton(optionsParam) {\n    _classCallCheck(this, LiquidButton);\n\n    var options = optionsParam || {};\n    this.tension = options.tension || 0.4;\n    this.width = options.width || 200;\n    this.height = options.width || 50;\n    this.margin = options.margin || 50;\n    this.padding = options.padding || 17;\n    this.hoverFactor = options.hoverFactor || -0.1;\n    this.gap = options.gap || 5;\n    this.debug = options.debug || false;\n    this.forceFactor = options.forceFactor || 0.2;\n    this.color1 = options.color1 || '#36DFE7';\n    this.color2 = options.color2 || '#8F17E1';\n    this.color3 = options.color3 || '#E509E6';\n    this.textColor = options.textColor || '#FFFFFF';\n    this.layers = [{\n      points: [],\n      viscosity: 0.5,\n      mouseForce: 100,\n      forceLimit: 2\n    }, {\n      points: [],\n      viscosity: 0.8,\n      mouseForce: 150,\n      forceLimit: 3\n    }];\n    this.text = options.text || '▶';\n    this.canvas = options.canvas || document.createElement('canvas');\n    this.context = this.canvas.getContext('2d');\n    this.wrapperElement = options.wrapperElement || document.body;\n\n    if (!this.canvas.parentElement) {\n      this.wrapperElement.append(this.canvas);\n    }\n\n    this.touches = [];\n    this.noise = options.noise || 0;\n    this.canvas.addEventListener('mousemove', this.mousemove);\n    this.canvas.addEventListener('mouseout', this.mouseout);\n    this.initOrigins();\n    this.animate();\n  }\n\n  _createClass(LiquidButton, [{\n    key: \"distance\",\n    value: function distance(p1, p2) {\n      return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      for (var layerIndex = 0; layerIndex < this.layers.length; layerIndex++) {\n        var layer = this.layers[layerIndex];\n        var points = layer.points;\n\n        for (var pointIndex = 0; pointIndex < points.length; pointIndex++) {\n          var point = points[pointIndex];\n          var dx = point.ox - point.x + (Math.random() - 0.5) * this.noise;\n          var dy = point.oy - point.y + (Math.random() - 0.5) * this.noise;\n          var d = Math.sqrt(dx * dx + dy * dy);\n          var f = d * this.forceFactor;\n          point.vx += f * (dx / d || 0);\n          point.vy += f * (dy / d || 0);\n\n          for (var touchIndex = 0; touchIndex < this.touches.length; touchIndex++) {\n            var touch = this.touches[touchIndex];\n            var mouseForce = layer.mouseForce;\n\n            if (touch.x > this.margin && touch.x < this.margin + this.width && touch.y > this.margin && touch.y < this.margin + this.height) {\n              mouseForce *= -this.hoverFactor;\n            }\n\n            var mx = point.x - touch.x;\n            var my = point.y - touch.y;\n            var md = Math.sqrt(mx * mx + my * my);\n            var mf = Math.max(-layer.forceLimit, Math.min(layer.forceLimit, mouseForce * touch.force / md));\n            point.vx += mf * (mx / md || 0);\n            point.vy += mf * (my / md || 0);\n          }\n\n          point.vx *= layer.viscosity;\n          point.vy *= layer.viscosity;\n          point.x += point.vx;\n          point.y += point.vy;\n        }\n\n        for (var _pointIndex = 0; _pointIndex < points.length; _pointIndex++) {\n          var prev = points[(_pointIndex + points.length - 1) % points.length];\n          var _point = points[_pointIndex];\n          var next = points[(_pointIndex + points.length + 1) % points.length];\n          var dPrev = this.distance(_point, prev);\n          var dNext = this.distance(_point, next);\n          var line = {\n            x: next.x - prev.x,\n            y: next.y - prev.y\n          };\n          var dLine = Math.sqrt(line.x * line.x + line.y * line.y);\n          _point.cPrev = {\n            x: _point.x - line.x / dLine * dPrev * this.tension,\n            y: _point.y - line.y / dLine * dPrev * this.tension\n          };\n          _point.cNext = {\n            x: _point.x + line.x / dLine * dNext * this.tension,\n            y: _point.y + line.y / dLine * dNext * this.tension\n          };\n        }\n      }\n    }\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      var _this = this;\n\n      this.raf(function () {\n        _this.update();\n\n        _this.draw();\n\n        _this.animate();\n      });\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n      for (var layerIndex = 0; layerIndex < this.layers.length; layerIndex++) {\n        var layer = this.layers[layerIndex];\n\n        if (layerIndex === 1) {\n          if (this.touches.length > 0) {\n            var gx = this.touches[0].x;\n            var gy = this.touches[0].y;\n            layer.color = this.context.createRadialGradient(gx, gy, this.height * 2, gx, gy, 0);\n            layer.color.addColorStop(0, this.color2);\n            layer.color.addColorStop(1, this.color3);\n          } else {\n            layer.color = this.color2;\n          }\n        } else {\n          layer.color = this.color1;\n        }\n\n        var points = layer.points;\n        this.context.fillStyle = layer.color;\n        this.context.beginPath();\n        this.context.moveTo(points[0].x, points[0].y);\n\n        for (var pointIndex = 1; pointIndex < points.length; pointIndex += 1) {\n          this.context.bezierCurveTo(points[(pointIndex + 0) % points.length].cNext.x, points[(pointIndex + 0) % points.length].cNext.y, points[(pointIndex + 1) % points.length].cPrev.x, points[(pointIndex + 1) % points.length].cPrev.y, points[(pointIndex + 1) % points.length].x, points[(pointIndex + 1) % points.length].y);\n        }\n\n        this.context.fill();\n      }\n\n      this.context.fillStyle = this.textColor;\n      this.context.font = '100 ' + (this.height - this.padding * 2) + 'px sans-serif';\n      this.context.textAlign = 'center';\n      this.context.textBaseline = 'middle';\n      this.context.fillText(this.text, this.canvas.width / 2, this.canvas.height / 2, this.width - this.padding * 2);\n\n      if (this.debug) {\n        this.drawDebug();\n      }\n    }\n  }, {\n    key: \"drawDebug\",\n    value: function drawDebug() {\n      this.context.fillStyle = 'rgba(255, 255, 255, 0.8)';\n      this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n      for (var layerIndex = 0; layerIndex < this.layers.length; layerIndex++) {\n        var layer = this.layers[layerIndex];\n        var points = layer.points;\n\n        for (var pointIndex = 0; pointIndex < points.length; pointIndex++) {\n          if (layerIndex === 0) {\n            this.context.fillStyle = this.color1;\n          } else {\n            this.context.fillStyle = this.color2;\n          }\n\n          var point = points[pointIndex];\n          this.context.fillRect(point.x, point.y, 1, 1);\n          this.context.fillStyle = '#000';\n          this.context.fillRect(point.cPrev.x, point.cPrev.y, 1, 1);\n          this.context.fillRect(point.cNext.x, point.cNext.y, 1, 1);\n          this.context.strokeStyle = 'rgba(0, 0, 0, 0.33)';\n          this.context.strokeWidth = 0.5;\n          this.context.beginPath();\n          this.context.moveTo(point.cPrev.x, point.cPrev.y);\n          this.context.lineTo(point.cNext.x, point.cNext.y);\n          this.context.stroke();\n        }\n      }\n    }\n  }, {\n    key: \"createPoint\",\n    value: function createPoint(x, y) {\n      return {\n        x: x,\n        y: y,\n        ox: x,\n        oy: y,\n        vx: 0,\n        vy: 0\n      };\n    }\n  }, {\n    key: \"initOrigins\",\n    value: function initOrigins() {\n      this.canvas.width = this.width + this.margin * 2;\n      this.canvas.height = this.height + this.margin * 2;\n\n      for (var layerIndex = 0; layerIndex < this.layers.length; layerIndex++) {\n        var layer = this.layers[layerIndex];\n        var points = [];\n\n        for (var x = ~~(this.height / 2); x < this.width - ~~(this.height / 2); x += this.gap) {\n          points.push(this.createPoint(x + this.margin, this.margin));\n        }\n\n        for (var alpha = ~~(this.height * 1.25); alpha >= 0; alpha -= this.gap) {\n          var angle = Math.PI / ~~(this.height * 1.25) * alpha;\n          points.push(this.createPoint(Math.sin(angle) * this.height / 2 + this.margin + this.width - this.height / 2, Math.cos(angle) * this.height / 2 + this.margin + this.height / 2));\n        }\n\n        for (var _x = this.width - ~~(this.height / 2) - 1; _x >= ~~(this.height / 2); _x -= this.gap) {\n          points.push(this.createPoint(_x + this.margin, this.margin + this.height));\n        }\n\n        for (var _alpha = 0; _alpha <= ~~(this.height * 1.25); _alpha += this.gap) {\n          var _angle = Math.PI / ~~(this.height * 1.25) * _alpha;\n\n          points.push(this.createPoint(this.height - Math.sin(_angle) * this.height / 2 + this.margin - this.height / 2, Math.cos(_angle) * this.height / 2 + this.margin + this.height / 2));\n        }\n\n        layer.points = points;\n      }\n    }\n  }, {\n    key: \"mousemove\",\n    get: function get() {\n      var _this2 = this;\n\n      return function (e) {\n        _this2.touches = [{\n          x: e.offsetX,\n          y: e.offsetY,\n          z: 0,\n          force: 1\n        }];\n      };\n    }\n  }, {\n    key: \"mouseout\",\n    get: function get() {\n      var _this3 = this;\n\n      return function (e) {\n        _this3.touches = [];\n      };\n    }\n  }, {\n    key: \"raf\",\n    get: function get() {\n      return this.__raf || (this.__raf = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) {\n        setTimeout(callback, 10);\n      }).bind(window));\n    }\n  }]);\n\n  return LiquidButton;\n}();\n\nvar redraw = function redraw() {\n  button.initOrigins();\n};\n\nvar button = new LiquidButton();\nvar gui = new dat.GUI();\ngui.add(button, \"debug\");\ngui.add(button, \"text\");\ngui.add(button, \"gap\", 1, 20, 1).onChange(redraw);\ngui.add(button, \"width\", 50, 500, 1).onChange(redraw);\ngui.add(button, \"height\", 10, 200, 1).onChange(redraw);\ngui.add(button, \"margin\", 10, 100, 1).onChange(redraw);\ngui.add(button, \"padding\", 0, 30, 1);\ngui.add(button, \"tension\", 0, 1, 0.01);\ngui.add(button, \"forceFactor\", 0, 1, 0.01);\ngui.add(button, \"hoverFactor\", -1, 1, 0.01);\ngui.addColor(button, \"color1\");\ngui.addColor(button, \"color2\");\ngui.addColor(button, \"color3\");\ngui.addColor(button, \"textColor\");\n\nfor (var layerIndex = 0; layerIndex < button.layers.length; layerIndex++) {\n  var layer = button.layers[layerIndex];\n  var folder = gui.addFolder('Layer ' + (layerIndex + 1));\n  folder.add(layer, \"viscosity\", 0, 1, 0.01);\n  folder.add(layer, \"mouseForce\", 0, 2000, 1);\n  folder.add(layer, \"forceLimit\", 0, 200, 0.1);\n  folder.open();\n}\n\nif (window.innerWidth < 1000) {\n  gui.close();\n}","map":{"version":3,"sources":["/home/tantan33/code/Tantan33650/portfolio/app/javascript/packs/jelly-button.js"],"names":["LiquidButton","optionsParam","options","tension","width","height","margin","padding","hoverFactor","gap","debug","forceFactor","color1","color2","color3","textColor","layers","points","viscosity","mouseForce","forceLimit","text","canvas","document","createElement","context","getContext","wrapperElement","body","parentElement","append","touches","noise","addEventListener","mousemove","mouseout","initOrigins","animate","p1","p2","Math","sqrt","pow","x","y","layerIndex","length","layer","pointIndex","point","dx","ox","random","dy","oy","d","f","vx","vy","touchIndex","touch","mx","my","md","mf","max","min","force","prev","next","dPrev","distance","dNext","line","dLine","cPrev","cNext","raf","update","draw","clearRect","gx","gy","color","createRadialGradient","addColorStop","fillStyle","beginPath","moveTo","bezierCurveTo","fill","font","textAlign","textBaseline","fillText","drawDebug","fillRect","strokeStyle","strokeWidth","lineTo","stroke","push","createPoint","alpha","angle","PI","sin","cos","e","offsetX","offsetY","z","__raf","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","bind","redraw","button","gui","dat","GUI","add","onChange","addColor","folder","addFolder","open","innerWidth","close"],"mappings":"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","sourcesContent":["const LiquidButton = class LiquidButton {\n  constructor(optionsParam) {\n    const options = optionsParam || {};\n    this.tension = options.tension || 0.4;\n    this.width   = options.width   || 200;\n    this.height  = options.width   ||  50;\n    this.margin  = options.margin  ||  50;\n    this.padding = options.padding ||  17;\n    this.hoverFactor = options.hoverFactor || -0.1;\n    this.gap     = options.gap     ||   5;\n    this.debug   = options.debug   || false;\n    this.forceFactor = options.forceFactor || 0.2;\n    this.color1 = options.color1 || '#36DFE7';\n    this.color2 = options.color2 || '#8F17E1';\n    this.color3 = options.color3 || '#E509E6';\n    this.textColor = options.textColor || '#FFFFFF';\n    this.layers = [{\n      points: [],\n      viscosity: 0.5,\n      mouseForce: 100,\n      forceLimit: 2,\n    },{\n      points: [],\n      viscosity: 0.8,\n      mouseForce: 150,\n      forceLimit: 3,\n    }];\n    this.text    = options.text    || '▶';\n    this.canvas  = options.canvas  || document.createElement('canvas');\n    this.context = this.canvas.getContext('2d');\n    this.wrapperElement = options.wrapperElement || document.body;\n    if (!this.canvas.parentElement) {\n      this.wrapperElement.append(this.canvas);\n    }\n    this.touches = [];\n    this.noise = options.noise || 0;\n    this.canvas.addEventListener('mousemove', this.mousemove);\n    this.canvas.addEventListener('mouseout', this.mouseout);\n    this.initOrigins();\n    this.animate();\n  }\n\n  get mousemove() {\n    return (e) => {\n      this.touches = [{\n        x: e.offsetX,\n        y: e.offsetY,\n        z: 0,\n        force: 1,\n      }];\n    };\n  }\n\n  get mouseout() {\n    return (e) => {\n      this.touches = [];\n    };\n  }\n\n  get raf() {\n    return this.__raf || (this.__raf = (\n      window.requestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      function(callback){ setTimeout(callback, 10)}\n    ).bind(window));\n  }\n\n  distance(p1, p2) {\n    return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n  }\n\n  update() {\n    for (let layerIndex = 0; layerIndex < this.layers.length; layerIndex++) {\n      const layer = this.layers[layerIndex];\n      const points = layer.points;\n      for (let pointIndex = 0; pointIndex < points.length; pointIndex++) {\n        const point = points[pointIndex];\n        const dx = point.ox - point.x + (Math.random() - 0.5) * this.noise;\n        const dy = point.oy - point.y + (Math.random() - 0.5) * this.noise;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const f = d * this.forceFactor;\n        point.vx += f * ((dx / d) || 0);\n        point.vy += f * ((dy / d) || 0);\n        for (let touchIndex = 0; touchIndex < this.touches.length; touchIndex++) {\n          const touch = this.touches[touchIndex];\n          let mouseForce = layer.mouseForce;\n          if (\n            touch.x > this.margin &&\n            touch.x < this.margin + this.width &&\n            touch.y > this.margin &&\n            touch.y < this.margin + this.height\n          ) {\n            mouseForce *= -this.hoverFactor;\n          }\n          const mx = point.x - touch.x;\n          const my = point.y - touch.y;\n          const md = Math.sqrt(mx * mx + my * my);\n          const mf = Math.max(-layer.forceLimit, Math.min(layer.forceLimit, (mouseForce * touch.force) / md));\n          point.vx += mf * ((mx / md) || 0);\n          point.vy += mf * ((my / md) || 0);\n        }\n        point.vx *= layer.viscosity;\n        point.vy *= layer.viscosity;\n        point.x += point.vx;\n        point.y += point.vy;\n      }\n      for (let pointIndex = 0; pointIndex < points.length; pointIndex++) {\n        const prev = points[(pointIndex + points.length - 1) % points.length];\n        const point = points[pointIndex];\n        const next = points[(pointIndex + points.length + 1) % points.length];\n        const dPrev = this.distance(point, prev);\n        const dNext = this.distance(point, next);\n\n        const line = {\n          x: next.x - prev.x,\n          y: next.y - prev.y,\n        };\n        const dLine = Math.sqrt(line.x * line.x + line.y * line.y);\n\n        point.cPrev = {\n          x: point.x - (line.x / dLine) * dPrev * this.tension,\n          y: point.y - (line.y / dLine) * dPrev * this.tension,\n        };\n        point.cNext = {\n          x: point.x + (line.x / dLine) * dNext * this.tension,\n          y: point.y + (line.y / dLine) * dNext * this.tension,\n        };\n      }\n    }\n  }\n\n  animate() {\n    this.raf(() => {\n      this.update();\n      this.draw();\n      this.animate();\n    });\n  }\n\n  draw() {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    for (let layerIndex = 0; layerIndex < this.layers.length; layerIndex++) {\n      const layer = this.layers[layerIndex];\n      if (layerIndex === 1) {\n        if (this.touches.length > 0) {\n          const gx = this.touches[0].x;\n          const gy = this.touches[0].y;\n          layer.color = this.context.createRadialGradient(gx, gy, this.height * 2, gx, gy, 0);\n          layer.color.addColorStop(0, this.color2);\n          layer.color.addColorStop(1, this.color3);\n        } else {\n          layer.color = this.color2;\n        }\n      } else {\n        layer.color = this.color1;\n      }\n      const points = layer.points;\n      this.context.fillStyle = layer.color;\n\n      this.context.beginPath();\n      this.context.moveTo(points[0].x, points[0].y);\n      for (let pointIndex = 1; pointIndex < points.length; pointIndex += 1) {\n        this.context.bezierCurveTo(\n          points[(pointIndex + 0) % points.length].cNext.x,\n          points[(pointIndex + 0) % points.length].cNext.y,\n          points[(pointIndex + 1) % points.length].cPrev.x,\n          points[(pointIndex + 1) % points.length].cPrev.y,\n          points[(pointIndex + 1) % points.length].x,\n          points[(pointIndex + 1) % points.length].y\n        );\n      }\n      this.context.fill();\n    }\n    this.context.fillStyle = this.textColor;\n    this.context.font = '100 ' + (this.height - this.padding * 2) + 'px sans-serif';\n    this.context.textAlign = 'center';\n    this.context.textBaseline = 'middle';\n    this.context.fillText(this.text, this.canvas.width / 2, this.canvas.height / 2, this.width - this.padding * 2);\n    if (this.debug) {\n      this.drawDebug();\n    }\n  }\n\n  drawDebug() {\n    this.context.fillStyle = 'rgba(255, 255, 255, 0.8)';\n    this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    for (let layerIndex = 0; layerIndex < this.layers.length; layerIndex++) {\n      const layer = this.layers[layerIndex];\n      const points = layer.points;\n      for (let pointIndex = 0; pointIndex < points.length; pointIndex++) {\n        if (layerIndex === 0) {\n          this.context.fillStyle = this.color1;\n        } else {\n          this.context.fillStyle = this.color2;\n        }\n        const point = points[pointIndex];\n        this.context.fillRect(point.x, point.y, 1, 1);\n        this.context.fillStyle = '#000';\n        this.context.fillRect(point.cPrev.x, point.cPrev.y, 1, 1);\n        this.context.fillRect(point.cNext.x, point.cNext.y, 1, 1);\n        this.context.strokeStyle = 'rgba(0, 0, 0, 0.33)';\n        this.context.strokeWidth = 0.5;\n        this.context.beginPath();\n        this.context.moveTo(point.cPrev.x, point.cPrev.y);\n        this.context.lineTo(point.cNext.x, point.cNext.y);\n        this.context.stroke();\n      }\n    }\n  }\n\n  createPoint(x, y) {\n    return {\n      x: x,\n      y: y,\n      ox: x,\n      oy: y,\n      vx: 0,\n      vy: 0,\n    };\n  }\n\n  initOrigins() {\n    this.canvas.width = this.width + this.margin * 2;\n    this.canvas.height = this.height + this.margin * 2;\n    for (let layerIndex = 0; layerIndex < this.layers.length; layerIndex++) {\n      const layer = this.layers[layerIndex];\n      const points = [];\n      for (let x = ~~(this.height / 2); x < this.width - ~~(this.height / 2); x += this.gap) {\n        points.push(this.createPoint(\n          x + this.margin,\n          this.margin\n        ));\n      }\n      for (let alpha = ~~(this.height * 1.25); alpha >= 0; alpha -= this.gap) {\n        const angle = (Math.PI / ~~(this.height * 1.25)) * alpha;\n        points.push(this.createPoint(\n          Math.sin(angle) * this.height / 2 + this.margin + this.width - this.height / 2,\n          Math.cos(angle) * this.height / 2 + this.margin + this.height / 2\n        ));\n      }\n      for (let x = this.width - ~~(this.height / 2) - 1; x >= ~~(this.height / 2); x -= this.gap) {\n        points.push(this.createPoint(\n          x + this.margin,\n          this.margin + this.height\n        ));\n      }\n      for (let alpha = 0; alpha <= ~~(this.height * 1.25); alpha += this.gap) {\n        const angle = (Math.PI / ~~(this.height * 1.25)) * alpha;\n        points.push(this.createPoint(\n          (this.height - Math.sin(angle) * this.height / 2) + this.margin - this.height / 2,\n          Math.cos(angle) * this.height / 2 + this.margin + this.height / 2\n        ));\n      }\n      layer.points = points;\n    }\n  }\n}\n\n\nconst redraw = () => {\n  button.initOrigins();\n};\n\nlet button = new LiquidButton();\n\nvar gui = new dat.GUI();\ngui.add(button, \"debug\");\ngui.add(button, \"text\");\ngui.add(button, \"gap\", 1, 20, 1).onChange(redraw);\ngui.add(button, \"width\", 50, 500, 1).onChange(redraw);\ngui.add(button, \"height\", 10, 200, 1).onChange(redraw);\ngui.add(button, \"margin\", 10, 100, 1).onChange(redraw);\ngui.add(button, \"padding\", 0, 30, 1);\ngui.add(button, \"tension\", 0, 1, 0.01);\ngui.add(button, \"forceFactor\", 0, 1, 0.01);\ngui.add(button, \"hoverFactor\", -1, 1, 0.01);\ngui.addColor(button, \"color1\");\ngui.addColor(button, \"color2\");\ngui.addColor(button, \"color3\");\ngui.addColor(button, \"textColor\");\nfor (let layerIndex = 0; layerIndex < button.layers.length; layerIndex++) {\n  const layer = button.layers[layerIndex];\n  const folder = gui.addFolder('Layer ' + (layerIndex + 1));\n  folder.add(layer, \"viscosity\", 0, 1, 0.01);\n  folder.add(layer, \"mouseForce\", 0, 2000, 1);\n  folder.add(layer, \"forceLimit\", 0, 200, 0.1);\n  folder.open();\n}\n\nif (window.innerWidth < 1000) {\n  gui.close();\n}\n"]},"metadata":{},"sourceType":"module"}