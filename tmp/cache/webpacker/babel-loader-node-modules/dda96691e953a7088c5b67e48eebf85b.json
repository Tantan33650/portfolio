{"ast":null,"code":"function atvImg() {\n  var d = document,\n      de = d.documentElement,\n      bd = d.getElementsByTagName('body')[0],\n      htm = d.getElementsByTagName('html')[0],\n      win = window,\n      imgs = d.querySelectorAll('.atvImg'),\n      totalImgs = imgs.length,\n      supportsTouch = 'ontouchstart' in win || navigator.msMaxTouchPoints;\n\n  if (totalImgs <= 0) {\n    return;\n  }\n\n  for (var l = 0; l < totalImgs; l++) {\n    var thisImg = imgs[l],\n        layerElems = thisImg.querySelectorAll('.atvImg-layer'),\n        totalLayerElems = layerElems.length;\n\n    if (totalLayerElems <= 0) {\n      continue;\n    }\n\n    while (thisImg.firstChild) {\n      thisImg.removeChild(thisImg.firstChild);\n    }\n\n    var containerHTML = d.createElement('div'),\n        shineHTML = d.createElement('div'),\n        shadowHTML = d.createElement('div'),\n        layersHTML = d.createElement('div'),\n        layers = [];\n    thisImg.id = 'atvImg__' + l;\n    containerHTML.className = 'atvImg-container';\n    shineHTML.className = 'atvImg-shine';\n    shadowHTML.className = 'atvImg-shadow';\n    layersHTML.className = 'atvImg-layers';\n\n    for (var i = 0; i < totalLayerElems; i++) {\n      var layer = d.createElement('div'),\n          imgSrc = layerElems[i].getAttribute('style');\n      layer.className = 'atvImg-rendered-layer';\n      layer.setAttribute('data-layer', i);\n      layer.style.backgroundImage = 'url(' + imgSrc + ')';\n      layersHTML.appendChild(layer);\n      layers.push(layer);\n    }\n\n    containerHTML.appendChild(shadowHTML);\n    containerHTML.appendChild(layersHTML);\n    containerHTML.appendChild(shineHTML);\n    thisImg.appendChild(containerHTML);\n    var w = thisImg.clientWidth || thisImg.offsetWidth || thisImg.scrollWidth;\n    thisImg.style.transform = 'perspective(' + w * 3 + 'px)';\n\n    if (supportsTouch) {\n      win.preventScroll = false;\n\n      (function (_thisImg, _layers, _totalLayers, _shine) {\n        thisImg.addEventListener('touchmove', function (e) {\n          if (win.preventScroll) {\n            e.preventDefault();\n          }\n\n          processMovement(e, true, _thisImg, _layers, _totalLayers, _shine);\n        });\n        thisImg.addEventListener('touchstart', function (e) {\n          win.preventScroll = true;\n          processEnter(e, _thisImg);\n        });\n        thisImg.addEventListener('touchend', function (e) {\n          win.preventScroll = false;\n          processExit(e, _thisImg, _layers, _totalLayers, _shine);\n        });\n      })(thisImg, layers, totalLayerElems, shineHTML);\n    } else {\n      (function (_thisImg, _layers, _totalLayers, _shine) {\n        thisImg.addEventListener('mousemove', function (e) {\n          processMovement(e, false, _thisImg, _layers, _totalLayers, _shine);\n        });\n        thisImg.addEventListener('mouseenter', function (e) {\n          processEnter(e, _thisImg);\n        });\n        thisImg.addEventListener('mouseleave', function (e) {\n          processExit(e, _thisImg, _layers, _totalLayers, _shine);\n        });\n      })(thisImg, layers, totalLayerElems, shineHTML);\n    }\n  }\n\n  function processMovement(e, touchEnabled, elem, layers, totalLayers, shine) {\n    var bdst = bd.scrollTop || htm.scrollTop,\n        bdsl = bd.scrollLeft,\n        pageX = touchEnabled ? e.touches[0].pageX : e.pageX,\n        pageY = touchEnabled ? e.touches[0].pageY : e.pageY,\n        offsets = elem.getBoundingClientRect(),\n        w = elem.clientWidth || elem.offsetWidth || elem.scrollWidth,\n        h = elem.clientHeight || elem.offsetHeight || elem.scrollHeight,\n        wMultiple = 320 / w,\n        offsetX = 0.52 - (pageX - offsets.left - bdsl) / w,\n        offsetY = 0.52 - (pageY - offsets.top - bdst) / h,\n        dy = pageY - offsets.top - bdst - h / 2,\n        dx = pageX - offsets.left - bdsl - w / 2,\n        yRotate = (offsetX - dx) * (0.07 * wMultiple),\n        xRotate = (dy - offsetY) * (0.1 * wMultiple),\n        imgCSS = 'rotateX(' + xRotate + 'deg) rotateY(' + yRotate + 'deg)',\n        arad = Math.atan2(dy, dx),\n        angle = arad * 180 / Math.PI - 90;\n\n    if (angle < 0) {\n      angle = angle + 360;\n    }\n\n    if (elem.firstChild.className.indexOf(' over') != -1) {\n      imgCSS += ' scale3d(1.07,1.07,1.07)';\n    }\n\n    elem.firstChild.style.transform = imgCSS;\n    shine.style.background = 'linear-gradient(' + angle + 'deg, rgba(255,255,255,' + (pageY - offsets.top - bdst) / h * 0.4 + ') 0%,rgba(255,255,255,0) 80%)';\n    shine.style.transform = 'translateX(' + offsetX * totalLayers - 0.1 + 'px) translateY(' + offsetY * totalLayers - 0.1 + 'px)';\n    var revNum = totalLayers;\n\n    for (var ly = 0; ly < totalLayers; ly++) {\n      layers[ly].style.transform = 'translateX(' + offsetX * revNum * (ly * 2.5 / wMultiple) + 'px) translateY(' + offsetY * totalLayers * (ly * 2.5 / wMultiple) + 'px)';\n      revNum--;\n    }\n  }\n\n  function processEnter(e, elem) {\n    elem.firstChild.className += ' over';\n  }\n\n  function processExit(e, elem, layers, totalLayers, shine) {\n    var container = elem.firstChild;\n    container.className = container.className.replace(' over', '');\n    container.style.transform = '';\n    shine.style.cssText = '';\n\n    for (var ly = 0; ly < totalLayers; ly++) {\n      layers[ly].style.transform = '';\n    }\n  }\n}\n\natvImg();","map":{"version":3,"sources":["/home/tantan33/code/Tantan33650/portfolio/app/javascript/packs/cards.js"],"names":["atvImg","d","document","de","documentElement","bd","getElementsByTagName","htm","win","window","imgs","querySelectorAll","totalImgs","length","supportsTouch","navigator","msMaxTouchPoints","l","thisImg","layerElems","totalLayerElems","firstChild","removeChild","containerHTML","createElement","shineHTML","shadowHTML","layersHTML","layers","id","className","i","layer","imgSrc","getAttribute","setAttribute","style","backgroundImage","appendChild","push","w","clientWidth","offsetWidth","scrollWidth","transform","preventScroll","_thisImg","_layers","_totalLayers","_shine","addEventListener","e","preventDefault","processMovement","processEnter","processExit","touchEnabled","elem","totalLayers","shine","bdst","scrollTop","bdsl","scrollLeft","pageX","touches","pageY","offsets","getBoundingClientRect","h","clientHeight","offsetHeight","scrollHeight","wMultiple","offsetX","left","offsetY","top","dy","dx","yRotate","xRotate","imgCSS","arad","Math","atan2","angle","PI","indexOf","background","revNum","ly","container","replace","cssText"],"mappings":"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","sourcesContent":["function atvImg(){\n  var d = document,\n    de = d.documentElement,\n    bd = d.getElementsByTagName('body')[0],\n    htm = d.getElementsByTagName('html')[0],\n    win = window,\n    imgs = d.querySelectorAll('.atvImg'),\n    totalImgs = imgs.length,\n    supportsTouch = 'ontouchstart' in win || navigator.msMaxTouchPoints;\n\n  if(totalImgs <= 0){\n    return;\n  }\n\n  for(var l=0;l<totalImgs;l++){\n\n    var thisImg = imgs[l],\n      layerElems = thisImg.querySelectorAll('.atvImg-layer'),\n      totalLayerElems = layerElems.length;\n\n    if(totalLayerElems <= 0){\n      continue;\n    }\n\n    while(thisImg.firstChild) {\n      thisImg.removeChild(thisImg.firstChild);\n    }\n\n    var containerHTML = d.createElement('div'),\n      shineHTML = d.createElement('div'),\n      shadowHTML = d.createElement('div'),\n      layersHTML = d.createElement('div'),\n      layers = [];\n\n    thisImg.id = 'atvImg__'+l;\n    containerHTML.className = 'atvImg-container';\n    shineHTML.className = 'atvImg-shine';\n    shadowHTML.className = 'atvImg-shadow';\n    layersHTML.className = 'atvImg-layers';\n\n    for(var i=0;i<totalLayerElems;i++){\n      var layer = d.createElement('div'),\n        imgSrc = layerElems[i].getAttribute('style');\n\n      layer.className = 'atvImg-rendered-layer';\n      layer.setAttribute('data-layer',i);\n      layer.style.backgroundImage = 'url('+imgSrc+')';\n      layersHTML.appendChild(layer);\n\n      layers.push(layer);\n    }\n\n    containerHTML.appendChild(shadowHTML);\n    containerHTML.appendChild(layersHTML);\n    containerHTML.appendChild(shineHTML);\n    thisImg.appendChild(containerHTML);\n\n    var w = thisImg.clientWidth || thisImg.offsetWidth || thisImg.scrollWidth;\n    thisImg.style.transform = 'perspective('+ w*3 +'px)';\n\n    if(supportsTouch){\n      win.preventScroll = false;\n\n          (function(_thisImg,_layers,_totalLayers,_shine) {\n        thisImg.addEventListener('touchmove', function(e){\n          if (win.preventScroll){\n            e.preventDefault();\n          }\n          processMovement(e,true,_thisImg,_layers,_totalLayers,_shine);\n        });\n              thisImg.addEventListener('touchstart', function(e){\n                win.preventScroll = true;\n          processEnter(e,_thisImg);\n        });\n        thisImg.addEventListener('touchend', function(e){\n          win.preventScroll = false;\n          processExit(e,_thisImg,_layers,_totalLayers,_shine);\n        });\n          })(thisImg,layers,totalLayerElems,shineHTML);\n      } else {\n        (function(_thisImg,_layers,_totalLayers,_shine) {\n        thisImg.addEventListener('mousemove', function(e){\n          processMovement(e,false,_thisImg,_layers,_totalLayers,_shine);\n        });\n              thisImg.addEventListener('mouseenter', function(e){\n          processEnter(e,_thisImg);\n        });\n        thisImg.addEventListener('mouseleave', function(e){\n          processExit(e,_thisImg,_layers,_totalLayers,_shine);\n        });\n          })(thisImg,layers,totalLayerElems,shineHTML);\n      }\n  }\n\n  function processMovement(e, touchEnabled, elem, layers, totalLayers, shine){\n\n    var bdst = bd.scrollTop || htm.scrollTop,\n      bdsl = bd.scrollLeft,\n      pageX = (touchEnabled)? e.touches[0].pageX : e.pageX,\n      pageY = (touchEnabled)? e.touches[0].pageY : e.pageY,\n      offsets = elem.getBoundingClientRect(),\n      w = elem.clientWidth || elem.offsetWidth || elem.scrollWidth,\n      h = elem.clientHeight || elem.offsetHeight || elem.scrollHeight,\n      wMultiple = 320/w,\n      offsetX = 0.52 - (pageX - offsets.left - bdsl)/w,\n      offsetY = 0.52 - (pageY - offsets.top - bdst)/h,\n      dy = (pageY - offsets.top - bdst) - h / 2,\n      dx = (pageX - offsets.left - bdsl) - w / 2,\n      yRotate = (offsetX - dx)*(0.07 * wMultiple),\n      xRotate = (dy - offsetY)*(0.1 * wMultiple),\n      imgCSS = 'rotateX(' + xRotate + 'deg) rotateY(' + yRotate + 'deg)',\n      arad = Math.atan2(dy, dx),\n      angle = arad * 180 / Math.PI - 90;\n\n    if (angle < 0) {\n      angle = angle + 360;\n    }\n\n    if(elem.firstChild.className.indexOf(' over') != -1){\n      imgCSS += ' scale3d(1.07,1.07,1.07)';\n    }\n    elem.firstChild.style.transform = imgCSS;\n\n    shine.style.background = 'linear-gradient(' + angle + 'deg, rgba(255,255,255,' + (pageY - offsets.top - bdst)/h * 0.4 + ') 0%,rgba(255,255,255,0) 80%)';\n    shine.style.transform = 'translateX(' + (offsetX * totalLayers) - 0.1 + 'px) translateY(' + (offsetY * totalLayers) - 0.1 + 'px)';\n\n    var revNum = totalLayers;\n    for(var ly=0;ly<totalLayers;ly++){\n      layers[ly].style.transform = 'translateX(' + (offsetX * revNum) * ((ly * 2.5) / wMultiple) + 'px) translateY(' + (offsetY * totalLayers) * ((ly * 2.5) / wMultiple) + 'px)';\n      revNum--;\n    }\n  }\n\n  function processEnter(e, elem){\n    elem.firstChild.className += ' over';\n  }\n\n  function processExit(e, elem, layers, totalLayers, shine){\n\n    var container = elem.firstChild;\n\n    container.className = container.className.replace(' over','');\n    container.style.transform = '';\n    shine.style.cssText = '';\n\n    for(var ly=0;ly<totalLayers;ly++){\n      layers[ly].style.transform = '';\n    }\n\n  }\n\n}\n\natvImg();\n"]},"metadata":{},"sourceType":"module"}